<!-- root component html -->

<!-- container -->
<div class="container">

	<!-- grid -->
	<div class="row">

		<!-- column -->
		<div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">

			<!-- form -->
			<!-- no action or method attribute: Angular must handle the submission -->
			<!-- #f="ngForm": inform Angular we require the form object it created -->
			<form (ngSubmit)="onSubmit(f)" #f="ngForm">

				<!-- user data -->

				<!-- ngModelGroup: treat both al inputs inside this div as a group and give it a name: userData -->
				<!-- Angular creates a FormGroup object and we can access it with ngModelGroup and a local referece -->
				<div id="user-data"
					 ngModelGroup="userData"
					 #userData="ngModelGroup">

					<!-- username -->
					<div class="form-group">

						<label for="username">
							Username
						</label>

						<!-- ngModel to inform Angular this is a control to insert in the form object -->
						<!-- name to identify the name the control will have -->

						<!-- required: built-in validator so this input should not be empty -->
						<!-- its caught and used by Angular to make this control have a 'false' value on the 'valid' property -->
						<input  type="text" 
								id="username" 
								class="form-control"
								ngModel
								name="username"
								required>

					</div>

					<!-- suggest a username button -->
					<button class="btn btn-default" 
							type="button"
							(click)="suggestUserName()">
						Suggest an Username
					</button>

					<!-- email -->
					<div class="form-group">

						<label for="email">
							Mail
						</label>

						<!-- ngModel to inform Angular this is a control to insert in the form object -->
						<!-- name to identify the name the control will have -->

						<!-- required: built-in validator so this input should not be empty -->
						<!-- its caught and used by Angular to make this control have a 'false' value on the 'valid' property -->

						<!-- email: built-in validator so this input should be of type email -->

						<!-- ngMode: acess FormControl object of this input here in the template -->
						<input  type="email" 
								id="email" 
								class="form-control"
								ngModel
								name="email"
								required
								email
								#email="ngModel">
						
						<!-- use FormControl properties to determine if this text shoud be displayed or not -->
						<span   class="help-block"
								*ngIf="!email.valid && email.touched">
							Please enter a valid value
						</span>

					</div>

				</div>

				<!-- display error message if the form group happens to be invalid through the local reference -->
				<p *ngIf="!userData.valid && userData.touched">
					User Data is invalid
				</p>

				<!-- secret questions section -->
				<div class="form-group">

					<label for="secret">
						Secret Questions
					</label>

					<!-- select one of two secret questions -->
					<!-- ngModel to inform Angular this is a control to insert in the form object -->
					<!-- name to identify the name the control will have -->

					<!-- [ngModel] property binding to set a default option: 'pet' -->
					<select id="secret" 
							class="form-control"
							[ngModel]="defaultQuestion"
							name="secret">

						<option value="pet">
							Your first Pet?
						</option>

						<option value="teacher">
							Your first teacher?
						</option>

					</select>

					<!-- text area -->
					<div class="form-group">

						<!-- two-way databinding to set a default value but also check for its content -->
						<textarea   class="form-control"
									name="questionAnswer" 
									rows="3"
									[(ngModel)]="answer">
						</textarea>

					</div>

					<p>
						Your reply: {{ answer }}
					</p>

					<!-- loop through the genders string -->
					<div class="radio"
						 *ngFor="let gender of genders">
						
						<label>

							<!-- create a new radio on each iteration with the current gender value -->
							<input  type="radio" 
									name="gender"
									ngModel
									[value]="gender"
									required>

							{{ gender }}

						</label>

					</div>

				</div>

				<!-- submit form button -->
				<!-- disable the button if the form is invalid -->
				<!-- access the 'valid' property of the NgForm form object (through local reference) -->
				<button class="btn btn-primary" 
						type="submit"
						[disabled]="!f.valid">
					Submit
				</button>

			</form>

			
		</div>
		
	</div>
	
	<hr>
	
	<!-- grid to display form data -->
	<div class="row"
		 *ngIf="submitted">

		<div class="col-xs-12">
			
			<h3>
				Your Data
			</h3>

			<p>
				Username: {{ user.username }}
			</p>

			<p>
				Mail: {{ user.email }}
			</p>

			<p>
				Secret Question: {{ user.secretQuestion }}
			</p>

			<p>
				Answer: {{ user.answer }}
			</p>

			<p>
				Gender: {{ user.gender }}
			</p>

		</div>
	</div>

</div>
